var getValues=function(t){for(var e=[],a=0,s=Object.values(t);a<s.length;a++){var n=s[a];e.push(n)}return e};function getGroup(t,e,a){return(t=t.filter((function(t){return t>=e&&t<=a}))).length}function getTotals(t,e){return t.map((function(t,a){return t+e[a]}))}function axisMin(t){var e=Math.max.apply(Math,t);return e>=10&&e<=15?e+=2:e=10*Math.ceil(e/10),e}var navbar=document.getElementById("navbar"),container=document.getElementById("container");container.onscroll=function(){container.scrollTop>=10||document.documentElement.scrollTop>=10?navbar.classList.add("shadow"):navbar.classList.remove("shadow")};var population=389410,main=document.getElementById("dateOfData"),reportDate=new Date(main.getAttribute("data-date").replace(/-/g,"/")),santorini="rgb(0, 88, 156)",santoriniA="rgba(0, 88, 156, 0.5)",hudson="rgb(24, 145, 194)",hudsonA="rgba(24, 145, 194, 0.5)";function monthName(t){return{0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"}[t.getMonth()]}function day(t){return t.getDate()}function startDate(t){return new Date(reportDate-24*t*60*60*1e3)}function getDaysArray(t,e){for(var a=[],s=new Date(t);s<=e;s.setDate(s.getDate()+1))a.push(new Date(s));return a}var daysBefore={seven:startDate(6),fourteen:startDate(13),twentyEight:startDate(27)},range={seven:getDaysArray(daysBefore.seven,reportDate),fourteen:getDaysArray(daysBefore.fourteen,reportDate),twentyEight:getDaysArray(daysBefore.twentyEight,reportDate)};function labeledDates(t){return t.map((function(t){return t="".concat(monthName(t)," ").concat(day(t))}))}var dayOne=new Date(reportDate.getFullYear(),reportDate.getMonth(),1),lastDay=new Date(reportDate.getFullYear(),reportDate.getMonth()+1,0);function doughnut(t,e){new Chart(t,{type:"doughnut",data:e})}var sevenDays=labeledDates(range.seven),fourteenDays=labeledDates(range.fourteen),twentyEightDays=labeledDates(range.twentyEight),chartOptions={responsive:!0,plugins:{legend:{position:"bottom"}},scales:{x:{grid:{display:!1}},y:{grid:{drawBorder:!1}}}},testing=document.getElementById("testing");if(testing){var btn={sevenDay:document.getElementById("testingSeven"),fourteenDay:document.getElementById("testingFourteen"),twentyEightDay:document.getElementById("testingTwentyEight")},positive=testing.getAttribute("positive").split(",").map(Number),negative=testing.getAttribute("negative").split(",").map(Number),testingData={labels:labeledDates(range.seven),datasets:[{label:"Positive",data:positive.slice(0,7),fill:{target:"origin",above:santoriniA},backgroundColor:santoriniA,borderColor:santorini,tension:.2},{label:"Negative",data:negative.slice(0,7),fill:{target:"origin",above:hudsonA},backgroundColor:hudsonA,borderColor:hudson,tension:.2}]},testChart=new Chart(testing,{type:"line",data:testingData,options:chartOptions});btn.sevenDay.onclick=function(){(btn.fourteenDay.classList.contains("current")||btn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),btn.fourteenDay.classList.remove("current"),btn.twentyEightDay.classList.remove("current")),testChart.options.scales.x.ticks.callback=function(t,e){return e%1==0?this.getLabelForValue(t):""},testChart.data.labels=sevenDays,testChart.data.datasets[0].data=positive.slice(0,7),testChart.data.datasets[1].data=negative.slice(0,7),testChart.update()},btn.fourteenDay.onclick=function(){(btn.sevenDay.classList.contains("current")||btn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),btn.sevenDay.classList.remove("current"),btn.twentyEightDay.classList.remove("current")),testChart.options.scales.x.ticks.callback=function(t,e){return e%1==0?this.getLabelForValue(t):""},testChart.data.labels=fourteenDays,testChart.data.datasets[0].data=positive.slice(0,14),testChart.data.datasets[1].data=negative.slice(0,14),testChart.update()},btn.twentyEightDay.onclick=function(){(btn.sevenDay.classList.contains("current")||btn.fourteenDay.classList.contains("current"))&&(this.classList.add("current"),btn.sevenDay.classList.remove("current"),btn.fourteenDay.classList.remove("current")),testChart.options.scales.x.ticks.callback=function(t,e){return e%3==0?this.getLabelForValue(t):""},testChart.data.labels=twentyEightDays,testChart.data.datasets[0].data=positive.slice(0,28),testChart.data.datasets[1].data=negative.slice(0,28),testChart.update()}}var recoveryFatality=document.getElementById("recoveryFatality");if(recoveryFatality){var recoveryFatalitybtn={sevenDay:document.getElementById("recoveryFatalitySeven"),fourteenDay:document.getElementById("recoveryFatalityFourteen"),twentyEightDay:document.getElementById("recoveryFatalityTwentyEight")},deaths=recoveryFatality.getAttribute("deaths").split(",").map(Number),recovered=recoveryFatality.getAttribute("recovered").split(",").map(Number),recoveryFatalityData={labels:labeledDates(range.seven),datasets:[{label:"deaths",data:deaths.slice(0,7),fill:{target:"origin",above:santoriniA},backgroundColor:santoriniA,borderColor:santorini,tension:.2},{label:"recovered",data:recovered.slice(0,7),fill:{target:"origin",above:hudsonA},backgroundColor:hudsonA,borderColor:hudson,tension:.2}]},rfChart=new Chart(recoveryFatality,{type:"line",data:recoveryFatalityData,options:chartOptions});recoveryFatalitybtn.sevenDay.onclick=function(){(recoveryFatalitybtn.fourteenDay.classList.contains("current")||recoveryFatalitybtn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),recoveryFatalitybtn.fourteenDay.classList.remove("current"),recoveryFatalitybtn.twentyEightDay.classList.remove("current")),rfChart.options.scales.x.ticks.callback=function(t,e){return e%1==0?this.getLabelForValue(t):""},rfChart.data.labels=sevenDays,rfChart.data.datasets[0].data=deaths.slice(0,7),rfChart.data.datasets[1].data=recovered.slice(0,7),rfChart.update()},recoveryFatalitybtn.fourteenDay.onclick=function(){(recoveryFatalitybtn.sevenDay.classList.contains("current")||recoveryFatalitybtn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),recoveryFatalitybtn.sevenDay.classList.remove("current"),recoveryFatalitybtn.twentyEightDay.classList.remove("current")),rfChart.options.scales.x.ticks.callback=function(t,e){return e%1==0?this.getLabelForValue(t):""},rfChart.data.labels=fourteenDays,rfChart.data.datasets[0].data=deaths.slice(0,14),rfChart.data.datasets[1].data=recovered.slice(0,14),rfChart.update()},recoveryFatalitybtn.twentyEightDay.onclick=function(){(recoveryFatalitybtn.sevenDay.classList.contains("current")||recoveryFatalitybtn.fourteenDay.classList.contains("current"))&&(this.classList.add("current"),recoveryFatalitybtn.sevenDay.classList.remove("current"),recoveryFatalitybtn.fourteenDay.classList.remove("current")),rfChart.options.scales.x.ticks.callback=function(t,e){return e%3==0?this.getLabelForValue(t):""},rfChart.data.labels=twentyEightDays,rfChart.data.datasets[0].data=deaths.slice(0,28),rfChart.data.datasets[1].data=recovered.slice(0,28),rfChart.update()}}var caseFatalities=document.getElementById("caseFatalities");if(caseFatalities){var _btn={sevenDay:document.getElementById("caseFatalitiesSeven"),fourteenDay:document.getElementById("caseFatalitiesFourteen"),twentyEightDay:document.getElementById("caseFatalitiesTwentyEight")},actual=caseFatalities.getAttribute("actual").split(",").map(Number),reported=caseFatalities.getAttribute("reported").split(",").map(Number),caseFatalitiesData={labels:labeledDates(range.seven),datasets:[{label:"Actual",data:actual.slice(0,7),fill:{target:"origin",above:santoriniA},backgroundColor:santoriniA,borderColor:santorini,tension:.2},{label:"Reported",data:reported.slice(0,7),fill:{target:"origin",above:hudsonA},backgroundColor:hudsonA,borderColor:hudson,tension:.2}]},_testChart=new Chart(caseFatalities,{type:"line",data:caseFatalitiesData,options:chartOptions});_btn.sevenDay.onclick=function(){(_btn.fourteenDay.classList.contains("current")||_btn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),_btn.fourteenDay.classList.remove("current"),_btn.twentyEightDay.classList.remove("current")),_testChart.options.scales.x.ticks.callback=function(t,e){return e%1==0?this.getLabelForValue(t):""},_testChart.data.labels=sevenDays,_testChart.data.datasets[0].data=actual.slice(0,7),_testChart.data.datasets[1].data=reported.slice(0,7),_testChart.update()},_btn.fourteenDay.onclick=function(){(_btn.sevenDay.classList.contains("current")||_btn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),_btn.sevenDay.classList.remove("current"),_btn.twentyEightDay.classList.remove("current")),_testChart.options.scales.x.ticks.callback=function(t,e){return e%1==0?this.getLabelForValue(t):""},_testChart.data.labels=fourteenDays,_testChart.data.datasets[0].data=actual.slice(0,14),_testChart.data.datasets[1].data=reported.slice(0,14),_testChart.update()},_btn.twentyEightDay.onclick=function(){(_btn.sevenDay.classList.contains("current")||_btn.fourteenDay.classList.contains("current"))&&(this.classList.add("current"),_btn.sevenDay.classList.remove("current"),_btn.fourteenDay.classList.remove("current")),_testChart.options.scales.x.ticks.callback=function(t,e){return e%3==0?this.getLabelForValue(t):""},_testChart.data.labels=twentyEightDays,_testChart.data.datasets[0].data=actual.slice(0,28),_testChart.data.datasets[1].data=reported.slice(0,28),_testChart.update()}}var ageSex=document.getElementById("ageSex"),ageSexLabels={children:"0-9",teens:"10-19",twenties:"20-29",thirties:"30-39",forties:"40-49",sifties:"50-59",sixties:"60-69",seventies:"70-79",eighties:"80-89",nineties:"90+"};if(ageSex){var ageSexFourteen=document.getElementById("ageSexFourteenDays"),ageSexTwentyEight=document.getElementById("ageSexTwentyEightDays"),male=ageSex.getAttribute("male").split(",").map(Number),female=ageSex.getAttribute("female").split(",").map(Number),maleFourteen=ageSexFourteen.getAttribute("male").split(",").map(Number),femaleFourteen=ageSexFourteen.getAttribute("female").split(",").map(Number),maleTwentyEight=ageSexTwentyEight.getAttribute("male").split(",").map(Number),femaleTwentyEight=ageSexTwentyEight.getAttribute("female").split(",").map(Number),ageSexbtn={sevenDay:document.getElementById("ageSexSeven"),fourteenDay:document.getElementById("ageSexFourteen"),twentyEightDay:document.getElementById("ageSexTwentyEight")},totalGroup=getTotals(male,female),ageSexData={labels:getValues(ageSexLabels),datasets:[{label:"Total",data:totalGroup,backgroundColor:"rgb(128, 128, 128)",borderColor:"rgb(128, 128, 128)",borderWidth:1},{label:"Male",data:male,backgroundColor:santorini,borderColor:santorini,borderWidth:1},{label:"Female",data:female,backgroundColor:hudson,borderColor:hudson,borderWidth:1}]},ageSexChart=new Chart(ageSex,{type:"bar",data:ageSexData,options:{resposive:!0,plugins:{legend:{position:"bottom"}},scales:{xAxes:{categoryPercentage:1,barPercentage:1},yAxes:{suggestedMax:axisMin(getValues(totalGroup))}}}});ageSexbtn.sevenDay.onclick=function(){(ageSexbtn.fourteenDay.classList.contains("current")||ageSexbtn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),ageSexbtn.fourteenDay.classList.remove("current"),ageSexbtn.twentyEightDay.classList.remove("current")),ageSexChart.data.datasets[0].data=male,ageSexChart.data.datasets[1].data=female,ageSexChart.update()},ageSexbtn.fourteenDay.onclick=function(){(ageSexbtn.sevenDay.classList.contains("current")||ageSexbtn.twentyEightDay.classList.contains("current"))&&(this.classList.add("current"),ageSexbtn.sevenDay.classList.remove("current"),ageSexbtn.twentyEightDay.classList.remove("current")),ageSexChart.data.datasets[0].data=maleFourteen,ageSexChart.data.datasets[1].data=femaleFourteen,ageSexChart.update()},ageSexbtn.twentyEightDay.onclick=function(){(ageSexbtn.sevenDay.classList.contains("current")||ageSexbtn.fourteenDay.classList.contains("current"))&&(this.classList.add("current"),ageSexbtn.sevenDay.classList.remove("current"),ageSexbtn.fourteenDay.classList.remove("current")),ageSexChart.data.datasets[0].data=maleTwentyEight,ageSexChart.data.datasets[1].data=femaleTwentyEight,ageSexChart.update()}}var statusPie=document.getElementById("statusPie");if(statusPie){var partial=statusPie.getAttribute("data-partial"),full=statusPie.getAttribute("data-full"),unvaccinated=statusPie.getAttribute("data-unvaccinated"),statusData={labels:["Full","Partial","Unvaccinated"],datasets:[{label:"Vaccination Status",data:[full,partial,unvaccinated],backgroundColor:[santorini,hudson,"grey"],hoverOffset:4}]};doughnut(statusPie,statusData)}for(var bars=document.getElementsByClassName("progress__bar"),i=0;i<bars.length;i++){var width=bars[i].getAttribute("data-bar");bars[i].style.width="".concat(width,"%")}